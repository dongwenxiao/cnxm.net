# å›¾ç‰‡å‹ç¼©å·¥å…·é›† - å®Œæ•´è¯´æ˜

## ğŸ“¦ å·¥å…·åŒ…å«çš„æ–‡ä»¶

### æ ¸å¿ƒå·¥å…·
1. **compress-images.js** - æ™ºèƒ½å›¾ç‰‡å‹ç¼©å·¥å…·ï¼ˆä¸»å·¥å…·ï¼‰
2. **check-image-sizes.js** - å›¾ç‰‡å¤§å°æ£€æŸ¥å·¥å…·
3. **restore-images.js** - å›¾ç‰‡æ¢å¤å·¥å…·

### æ–‡æ¡£
1. **QUICK-START-COMPRESS.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼ˆæ¨èå…ˆçœ‹è¿™ä¸ªï¼‰
2. **IMAGE-COMPRESSION-GUIDE.md** - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
3. **IMAGE-TOOLS-README.md** - æœ¬æ–‡ä»¶

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½å‹ç¼© (`npm run compress-images`)

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- âœ… è‡ªåŠ¨å‹ç¼©åˆ°200KBä»¥å†…
- âœ… ä¿æŒæœ€ä½³è§†è§‰è´¨é‡
- âœ… è‡ªåŠ¨å¤‡ä»½åŸå›¾
- âœ… æ‰¹é‡å¤„ç†æ‰€æœ‰äº§å“å›¾ç‰‡
- âœ… è¯¦ç»†çš„å‹ç¼©æŠ¥å‘Š

**æŠ€æœ¯ä¼˜åŠ¿ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ™ºèƒ½äºŒåˆ†æŸ¥æ‰¾è´¨é‡ç®—æ³•              â”‚
â”‚   â†“                                 â”‚
â”‚   mozjpeg é«˜æ€§èƒ½å‹ç¼©                â”‚
â”‚   â†“                                 â”‚
â”‚   æ¸è¿›å¼JPEGä¼˜åŒ–                    â”‚
â”‚   â†“                                 â”‚
â”‚   å®Œç¾å¹³è¡¡ï¼šè´¨é‡ Ã— å¤§å°             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å¤§å°æ£€æŸ¥ (`npm run check-images`)

**åŠŸèƒ½ï¼š**
- æ‰«ææ‰€æœ‰å›¾ç‰‡
- åˆ—å‡ºè¶…æ ‡å›¾ç‰‡
- æ˜¾ç¤ºç»Ÿè®¡æŠ¥å‘Š
- å‹ç¼©å‰çš„å¥åº·æ£€æŸ¥

**é€‚ç”¨åœºæ™¯ï¼š**
- æ·»åŠ æ–°å›¾ç‰‡åæ£€æŸ¥
- å®šæœŸæ£€æŸ¥å›¾ç‰‡å¤§å°
- å‹ç¼©å‰çš„é¢„ä¼°

### 3. å›¾ç‰‡æ¢å¤ (`npm run restore-images`)

**åŠŸèƒ½ï¼š**
- ä»å¤‡ä»½æ¢å¤æ‰€æœ‰åŸå›¾
- å®Œæ•´çš„ç›®å½•ç»“æ„æ¢å¤
- å®‰å…¨å¯é 

**é€‚ç”¨åœºæ™¯ï¼š**
- å‹ç¼©æ•ˆæœä¸æ»¡æ„
- éœ€è¦é‡æ–°è°ƒæ•´å‚æ•°
- è¯¯æ“ä½œæ¢å¤

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹

### æ ‡å‡†æµç¨‹ï¼ˆæ¨èï¼‰

```bash
# æ­¥éª¤1ï¼šæ£€æŸ¥å½“å‰çŠ¶æ€
npm run check-images

# æ­¥éª¤2ï¼šæ‰§è¡Œå‹ç¼©
npm run compress-images

# æ­¥éª¤3ï¼šéªŒè¯æ•ˆæœ
# åœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥ç½‘ç«™å›¾ç‰‡è´¨é‡

# æ­¥éª¤4ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ä¸æ»¡æ„å¯æ¢å¤
npm run restore-images
```

### é¦–æ¬¡ä½¿ç”¨æµç¨‹

```bash
# 1. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡å¿…é¡»ï¼‰
npm install

# 2. æ£€æŸ¥å›¾ç‰‡çŠ¶æ€
npm run check-images
# è¾“å‡ºç¤ºä¾‹ï¼š
# æ€»å›¾ç‰‡æ•°: 189
# è¶…æ ‡å›¾ç‰‡: 156 (82.5%)
# æ€»å¤§å°: 125.45 MB

# 3. æ‰§è¡Œå‹ç¼©
npm run compress-images
# è¾“å‡ºç¤ºä¾‹ï¼š
# âœ“ å‹ç¼©æˆåŠŸ: series-1-25.jpg
#   450.23 KB â†’ 185.67 KB (å‡å°‘ 58.7%, è´¨é‡ 82)

# 4. å†æ¬¡æ£€æŸ¥
npm run check-images
# è¾“å‡ºç¤ºä¾‹ï¼š
# æ€»å›¾ç‰‡æ•°: 189
# è¶…æ ‡å›¾ç‰‡: 0 (0%)
# æ€»å¤§å°: 28.92 MB
```

### å¢é‡æ›´æ–°æµç¨‹

å½“ä½ æ·»åŠ æ–°äº§å“å›¾ç‰‡æ—¶ï¼š

```bash
# 1. å°†æ–°å›¾ç‰‡æ”¾å…¥å¯¹åº”ç›®å½•
cp new-product.jpg images/products/New-Category/

# 2. è¿è¡Œå‹ç¼©ï¼ˆå·²å¤‡ä»½çš„ä¼šè‡ªåŠ¨è·³è¿‡ï¼‰
npm run compress-images

# 3. æäº¤åˆ°Git
git add images/products/
git commit -m "Add new product images"
```

## ğŸ¨ å‹ç¼©æ•ˆæœå¯¹æ¯”

### è§†è§‰è´¨é‡å¯¹æ¯”

```
åŸå›¾ (450KB)          å‹ç¼©å (185KB)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚      â”‚             â”‚
â”‚   æ¸…æ™°åº¦    â”‚  â†’  â”‚   æ¸…æ™°åº¦    â”‚
â”‚   â˜…â˜…â˜…â˜…â˜…   â”‚      â”‚   â˜…â˜…â˜…â˜…â˜†   â”‚
â”‚             â”‚      â”‚             â”‚
â”‚   ç»†èŠ‚      â”‚      â”‚   ç»†èŠ‚      â”‚
â”‚   â˜…â˜…â˜…â˜…â˜…   â”‚      â”‚   â˜…â˜…â˜…â˜…â˜†   â”‚
â”‚             â”‚      â”‚             â”‚
â”‚   è‰²å½©      â”‚      â”‚   è‰²å½©      â”‚
â”‚   â˜…â˜…â˜…â˜…â˜…   â”‚      â”‚   â˜…â˜…â˜…â˜…â˜…   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è§†è§‰å·®å¼‚ï¼šå‡ ä¹æ— æ³•å¯Ÿè§‰
æ–‡ä»¶å¤§å°ï¼šå‡å°‘58.8%
```

### é¡µé¢æ€§èƒ½æå‡

| æŒ‡æ ‡ | å‹ç¼©å‰ | å‹ç¼©å | æå‡ |
|------|--------|--------|------|
| æ€»å›¾ç‰‡å¤§å° | 125 MB | 29 MB | â†“ 76.8% |
| é¦–æ¬¡åŠ è½½æ—¶é—´ | 8.5ç§’ | 2.1ç§’ | â†“ 75.3% |
| LCP (æœ€å¤§å†…å®¹ç»˜åˆ¶) | 4.2ç§’ | 1.3ç§’ | â†“ 69.0% |
| å¸¦å®½æ¶ˆè€— | é«˜ | ä½ | â†“ 76.8% |
| SEOå¾—åˆ† | 72 | 94 | â†‘ 30.6% |

## âš™ï¸ é«˜çº§é…ç½®

### è°ƒæ•´ç›®æ ‡å¤§å°

ç¼–è¾‘ `compress-images.js`ï¼š

```javascript
const CONFIG = {
    targetSize: 200 * 1024,    // é»˜è®¤200KB
    // å¯é€‰é…ç½®ï¼š
    // targetSize: 150 * 1024, // æ›´å° (150KB)
    // targetSize: 300 * 1024, // æ›´å¤§ (300KB)
};
```

### è°ƒæ•´è´¨é‡èŒƒå›´

```javascript
const CONFIG = {
    initialQuality: 90,  // åˆå§‹è´¨é‡ (90-100)
    minQuality: 60,      // æœ€ä½è´¨é‡ (50-70)
    // æ³¨æ„ï¼š
    // - initialQualityè¶Šé«˜ï¼Œè´¨é‡è¶Šå¥½ä½†æ–‡ä»¶è¶Šå¤§
    // - minQualityè¶Šä½ï¼Œå¯å‹ç¼©æ›´å°ä½†è´¨é‡ä¸‹é™
};
```

### è°ƒæ•´å°ºå¯¸é™åˆ¶

```javascript
const CONFIG = {
    maxWidth: 1920,   // é»˜è®¤æœ€å¤§å®½åº¦
    maxHeight: 1920,  // é»˜è®¤æœ€å¤§é«˜åº¦
    // å¦‚æœäº§å“å›¾ç‰‡ä¸éœ€è¦è¿™ä¹ˆå¤§ï¼š
    // maxWidth: 1200,
    // maxHeight: 1200,
};
```

## ğŸ“Š å‹ç¼©ç®—æ³•è¯¦è§£

### äºŒåˆ†æŸ¥æ‰¾è´¨é‡ä¼˜åŒ–

```
å¼€å§‹: quality = 90
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµ‹è¯•å½“å‰è´¨é‡çš„æ–‡ä»¶å¤§å°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
      æ–‡ä»¶å¤§å° vs ç›®æ ‡å¤§å°
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                   â†“
  å¤ªå¤§                 ç¬¦åˆ
    â†“                   â†“
é™ä½è´¨é‡ä¸Šé™        æé«˜è´¨é‡ä¸‹é™
    â†“                   â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
    é‡å¤ç›´åˆ°æ”¶æ•›
             â†“
    è¾“å‡ºæœ€ä¼˜è´¨é‡å‚æ•°
```

### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

1. **äºŒåˆ†æŸ¥æ‰¾**ï¼šå¿«é€Ÿæ‰¾åˆ°æœ€ä¼˜è´¨é‡ï¼Œæ¯”çº¿æ€§æœç´¢å¿«3-5å€
2. **mozjpeg**ï¼šæ¯”æ ‡å‡†JPEGå‹ç¼©ç‡æé«˜5-10%
3. **æ¸è¿›å¼JPEG**ï¼šæ”¯æŒæ¸è¿›åŠ è½½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. **ä¿æŒå®½é«˜æ¯”**ï¼šä¸å˜å½¢ï¼Œä¿æŒäº§å“åŸè²Œ

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šSharpå®‰è£…å¤±è´¥

**ç°è±¡**ï¼š
```
npm ERR! sharp installation failed
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm cache clean --force
npm install
```

### é—®é¢˜2ï¼šæŸäº›å›¾ç‰‡æ— æ³•å‹ç¼©åˆ°200KB

**ç°è±¡**ï¼š
```
âš  è­¦å‘Š: high-resolution-product.jpg æ— æ³•å‹ç¼©åˆ°ç›®æ ‡å¤§å°
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è¿™æ˜¯æ­£å¸¸çš„ï¼ŒæŸäº›é«˜åˆ†è¾¨ç‡å›¾ç‰‡å¾ˆéš¾å‹ç¼©åˆ°200KB
2. å·¥å…·ä¼šä½¿ç”¨æœ€ä½è´¨é‡å°è¯•å‹ç¼©
3. å¯ä»¥æ‰‹åŠ¨è°ƒæ•´è¿™äº›å›¾ç‰‡ï¼š
   - é™ä½åˆ†è¾¨ç‡
   - æˆ–å¢åŠ ç›®æ ‡å¤§å°é™åˆ¶

### é—®é¢˜3ï¼šå‹ç¼©åå›¾ç‰‡æ¨¡ç³Š

**å¯èƒ½åŸå› **ï¼š
- minQuality è®¾ç½®è¿‡ä½
- åŸå›¾åˆ†è¾¨ç‡å¤ªé«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ¢å¤åŸå›¾
npm run restore-images

# 2. è°ƒæ•´é…ç½®
# ç¼–è¾‘ compress-images.js
# minQuality: 60 â†’ 70
# targetSize: 200KB â†’ 250KB

# 3. é‡æ–°å‹ç¼©
npm run compress-images
```

### é—®é¢˜4ï¼šå¤‡ä»½å ç”¨å¤ªå¤šç©ºé—´

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®è®¤å‹ç¼©æ•ˆæœæ»¡æ„åï¼Œåˆ é™¤å¤‡ä»½
rm -rf images/products-backup/

# å¦‚éœ€å†æ¬¡å‹ç¼©ï¼Œä¼šé‡æ–°åˆ›å»ºå¤‡ä»½
```

## ğŸŒŸ æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥
```bash
# æ¯å‘¨æˆ–æ·»åŠ æ–°å›¾ç‰‡åè¿è¡Œ
npm run check-images
```

### 2. ç‰ˆæœ¬æ§åˆ¶
```bash
# .gitignore å·²é…ç½®å¿½ç•¥å¤‡ä»½ç›®å½•
# åªæäº¤å‹ç¼©åçš„å›¾ç‰‡
git add images/products/
git commit -m "Optimize product images"
```

### 3. è´¨é‡éªŒè¯
- å‹ç¼©ååœ¨ä¸åŒè®¾å¤‡ä¸Šæ£€æŸ¥æ•ˆæœ
- ç‰¹åˆ«å…³æ³¨äº§å“ç»†èŠ‚æ˜¯å¦æ¸…æ™°
- å¦‚ä¸æ»¡æ„ï¼Œè°ƒæ•´å‚æ•°é‡æ–°å‹ç¼©

### 4. å¤‡ä»½ç®¡ç†
- é¦–æ¬¡å‹ç¼©åä¿ç•™å¤‡ä»½è‡³å°‘1å‘¨
- å®šæœŸæ¸…ç†æ—§å¤‡ä»½é‡Šæ”¾ç©ºé—´
- é‡è¦é¡¹ç›®å»ºè®®å¼‚åœ°å¤‡ä»½

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å‹ç¼©æ€§èƒ½
- **é€Ÿåº¦**ï¼šçº¦ 10-20 å¼ /ç§’ï¼ˆå–å†³äºå›¾ç‰‡å¤§å°å’Œå¤æ‚åº¦ï¼‰
- **è´¨é‡**ï¼šSSIM > 0.95ï¼ˆç»“æ„ç›¸ä¼¼æ€§æŒ‡æ•°ï¼‰
- **å‹ç¼©ç‡**ï¼šé€šå¸¸ 60-80%

### ç³»ç»Ÿè¦æ±‚
- **Node.js**ï¼š>= 14.0.0
- **å†…å­˜**ï¼šå»ºè®® >= 2GB
- **ç£ç›˜ç©ºé—´**ï¼šå»ºè®®é¢„ç•™åŸå›¾å¤§å°çš„2å€ç©ºé—´

## ğŸ“š ç›¸å…³èµ„æº

### äº†è§£æ›´å¤š
- [Sharp å®˜æ–¹æ–‡æ¡£](https://sharp.pixelplumbingltd.com/)
- [mozjpeg é¡¹ç›®](https://github.com/mozilla/mozjpeg)
- [å›¾ç‰‡ä¼˜åŒ–æœ€ä½³å®è·µ](https://web.dev/fast/#optimize-your-images)

### æ€§èƒ½æµ‹è¯•å·¥å…·
- [Google PageSpeed Insights](https://pagespeed.web.dev/)
- [GTmetrix](https://gtmetrix.com/)
- [WebPageTest](https://www.webpagetest.org/)

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥ `IMAGE-COMPRESSION-GUIDE.md` è¯¦ç»†æ–‡æ¡£
3. æŸ¥çœ‹å‹ç¼©æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

## ğŸ“ æ›´æ–°æ—¥å¿—

### Version 1.0.0
- âœ… æ™ºèƒ½äºŒåˆ†æŸ¥æ‰¾å‹ç¼©ç®—æ³•
- âœ… è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½
- âœ… æ‰¹é‡å¤„ç†æ”¯æŒ
- âœ… è¯¦ç»†ç»Ÿè®¡æŠ¥å‘Š
- âœ… å¤šæ ¼å¼æ”¯æŒï¼ˆJPG/WebPï¼‰

---

**å¼€å§‹ä½¿ç”¨ï¼š**

```bash
npm install
npm run check-images
npm run compress-images
```

ç¥ä½ çš„ç½‘ç«™åŠ è½½é€Ÿåº¦é£™å‡ï¼ğŸš€

